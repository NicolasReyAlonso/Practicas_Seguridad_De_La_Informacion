\chapter{Generación y Comprobación de Resúmenes}

\section{Descripción teórica}

Los algoritmos de resumen (\textit{hash}) son funciones criptográficas que transforman un 
documento de cualquier tamaño en una cadena de longitud fija, denominada \textit{hash} o \textit{resumen}. 

\section{Algoritmos utilizados}

\begin{table}[H]
    \centering
    \caption{Algoritmos de resumen utilizados}
    \begin{tabularx}{\textwidth}{l|c|c|p{5cm}}
        \toprule
        \textbf{Algoritmo} & \textbf{Bits} & \textbf{Bytes} & \textbf{Observaciones} \\
        \midrule
        MD5 & 128 & 16 & Obsoleto \\
        SHA-1 & 160 & 20 & Débil \\
        SHA-256 & 256 & 32 & Recomendado y usado en la actualidad \\
        SHA-512 & 512 & 64 & Muy seguro \\
        Whirlpool & 512 & 64 & Alternativa a SHA-512 \\
        \bottomrule
    \end{tabularx}
\end{table}

\section{Metodología experimental}

\subsection{Archivo de prueba}

Se utilizará un archivo de texto plano con las siguientes características:

\begin{itemize}[label=\textbullet]
    \item Tamaño: 170 caracteres-
    \item Contenido legible.
    \item Sin caracteres especiales.
\end{itemize}

\begin{lstlisting}[caption=Contenido del archivo de prueba]
Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
Vivamus bibendum iaculis ante, quis sagittis eros eleifend 
iaculis. Sed egestas consequat feugiat. Lorem aliquam.
\end{lstlisting}

\begin{lstlisting}[caption=Contenido del archivo de prueba modificado]
Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
Vivamus bibendum iaculis ante, quis sagittis eros eleifend 
iaculis. Sed egestas consequat feugiat. Lorem aliquas.
\end{lstlisting}

\subsection{Comandos utilizados}

\begin{lstlisting}[caption=Cálculo de resúmenes con OpenSSL]
# MD5
openssl dgst -md5 archivo.txt

# SHA-1
openssl dgst -sha1 archivo.txt

# SHA-256
openssl dgst -sha256 archivo.txt

# Formato con separadores
openssl dgst -sha256 -c archivo.txt

# Formato binario
openssl dgst -sha256 -binary archivo.txt > hash.bin
\end{lstlisting}

\section{Resultados}

\subsection{Resúmenes obtenidos}

% Tabla larga: usa longtable para permitir saltos de página
\begin{longtable}{@{}p{\textwidth}@{}}
\caption{Resúmenes calculados para el archivo de prueba}\\
\toprule
\textbf{Algoritmo} \\
\midrule
\endfirsthead
\caption[]{Resúmenes calculados para el archivo de prueba (cont.)}\\
\toprule
\textbf{Algoritmo} \\
\midrule
\endhead

MD5 \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/md5.png} \\
MD5 con formato de salida con separadores \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/md5-separator.png} \\
MD5 en formato binario \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/md5-binary.png} \\
SHA-1 \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/sha1.png} \\
SHA-1 con formato de salida con separadores \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/sha1-separator.png} \\
SHA-1 en formato binario \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/sha1-binary.png} \\
SHA-256 \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/sha256.png} \\
SHA-256 con formato de salida con separadores \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/sha256-separator.png} \\
SHA-256 en formato binario \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/sha256-binary.png} \\
SHA-512 \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/sha512.png} \\
SHA-512 con formato de salida con separadores \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/sha512-separator.png} \\
SHA-512 en formato binario \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/sha512-binary.png} \\
Whirlpool \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/whirlpool.png} \\
Whirlpool con formato de salida con separadores \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/whirlpool-separator.png} \\
Whirlpool en formato binario \\ \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/whirlpool-binary.png} \\
\bottomrule
\end{longtable}

\subsection{Verificación de tamaño}

Los tamaños de los resúmenes coinciden con las especificaciones teóricas:

\begin{itemize}[label=\textbullet]
    \item MD5: 32 caracteres hexadecimales (128 bits)
    \item SHA-1: 40 caracteres hexadecimales (160 bits)
    \item SHA-256: 64 caracteres hexadecimales (256 bits)
    \item SHA-512: 128 caracteres hexadecimales (512 bits)
    \item Whirlpool: 128 caracteres hexadecimales (512 bits)
\end{itemize}

\subsection{Sensibilidad del hash}

Se realizó una prueba de sensibilidad cambiando un único carácter del archivo original:
\begin{figure}[H]
    \centering
    \caption{Diferencias tras cambiar un único carácter (comparación de resúmenes)}
    \includegraphics[width=\linewidth]{imagenes/screenshots/resumenes/DiferenciasShaEdicion1caracter.png}
\end{figure}

\textbf{Conclusión:} A pesar de cambiar un único carácter, el hash es completamente diferente.
